# Requirements: server-game-modularize

## 背景

- `src/server/game.ts` は巨大で、変更時の影響範囲が広い。
- まずは副作用の少ない補助ロジックを分離し、段階的に分割しやすい形へ寄せる。

## 要求

1. `game.ts` 内の純粋ヘルパー関数（ゴースト種別選択、フルーツ種別選択、方向ユーティリティ）を外部モジュール化する。
2. gate/switch 判定ユーティリティを共通化し、重複ロジックを減らす。
3. セル走査の性能退行を避ける（`world` 生成時は gate/switch 判定を事前計算して利用する）。
4. 挙動変更を起こさず `check/build/test` を通す。
5. 今後の分割方針を docs に記録する。

## 非要求

- `GameEngine` の全メソッド分割はこのIssueで完了しない。
- ゲームバランス値の調整は対象外。
